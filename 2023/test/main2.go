package main

import (
	"fmt"
	"math"
)

/*
 * @Author: veno
 * @File: main2
 * @Version: ...
 * @Date: 2023-06-01 10:15:41
 * @Description: ...
 */

func cosineSimilarity(mat1 [][]float64, mat2 [][]float64) [][]float64 {
	result := make([][]float64, len(mat1))

	for i := 0; i < len(mat1); i++ {
		result[i] = make([]float64, len(mat2))
		for j := 0; j < len(mat2); j++ {
			result[i][j] = dotProduct(mat1[i], mat2[j]) / (euclideanNorm(mat1[i]) * euclideanNorm(mat2[j]))
		}
	}

	return result
}

func dotProduct(vec1 []float64, vec2 []float64) float64 {
	if len(vec1) != len(vec2) {
		return 0.0
	}

	result := 0.0
	for i := 0; i < len(vec1); i++ {
		result += vec1[i] * vec2[i]
	}

	return result
}

func euclideanNorm(vec []float64) float64 {
	squaredSum := 0.0
	for i := 0; i < len(vec); i++ {
		squaredSum += vec[i] * vec[i]
	}

	return math.Sqrt(squaredSum)
}

func main() {
	//mat1 := [][]float64{{}}
	//mat2 := [][]float64{{}}
	result := cosineSimilarity(mat1, mat2)
	max, min := findMinMaxValues(result)
	fmt.Println(result)
	fmt.Println("max: ", max, "min: ", min)
}

func findMinMaxValues(mat [][]float64) (float64, float64) {
	minValue := math.Inf(1)
	maxValue := math.Inf(-1)

	for i := 0; i < len(mat); i++ {
		for j := 0; j < len(mat[i]); j++ {
			if mat[i][j] < minValue {
				minValue = mat[i][j]
			}
			if mat[i][j] > maxValue {
				maxValue = mat[i][j]
			}
		}
	}
	return minValue, maxValue
}

var mat1 = [][]float64{{1.2906943559646606, -0.7551125288009644, 0.02216123230755329, -0.28352341055870056, -0.6832002401351929,
	-0.6311377286911011, -1.325907826423645, -0.39676377177238464, -0.09176459163427353, -0.8255104422569275,
	0.08283905684947968, -0.13051755726337433, -1.3753347396850586, 1.312601923942566, 0.43795984983444214,
	-0.5582429766654968, 0.8529946804046631, 0.02146735042333603, 1.3569461107254028, -0.6540029048919678,
	-0.021206578239798546, 0.47912994027137756, -0.34724047780036926, 0.06423162668943405, 0.3936132490634918,
	-0.5117602944374084, -0.5150230526924133, 1.7848342657089233, 1.0829789638519287, 0.49428942799568176,
	-1.6202529668807983, -0.8123555183410645, 1.5774526596069336, -2.398752450942993, -0.13825413584709167,
	-0.7766134738922119, 1.195813536643982, 0.6211300492286682, 0.0015532007673755288, 0.18374721705913544,
	-0.20904992520809174, -1.1212425231933594, 0.32995057106018066, 1.4520907402038574, -0.3155227303504944,
	-0.9273795485496521, -0.4973371624946594, -0.11531463265419006, -0.07799330353736877, -0.5727750062942505,
	0.0189680103212595, -0.17304588854312897, 0.6545385122299194, -0.4271329343318939, -1.1198267936706543,
	2.695908546447754, 0.7901625037193298, 0.6084492802619934, -0.7106600999832153, 0.253964364528656,
	2.153045654296875, 0.29889845848083496, -0.35056397318840027, 0.7201552987098694, 1.9687269926071167,
	0.004460727330297232, -0.051985371857881546, -0.23606498539447784, 0.31015172600746155, -0.5770626664161682,
	1.368185043334961, -1.2650017738342285, 2.085587739944458, 1.544618010520935, 1.3888587951660156,
	0.038575317710638046, 1.5688756704330444, -0.3181827962398529, 0.05697701871395111, 0.9588589668273926,
	0.07169704884290695, 0.19004328548908234, -0.6279594898223877, 0.3075532019138336, 0.9024175405502319,
	1.6029164791107178, -0.8049799799919128, 3.915487051010132, -0.017862970009446144, -1.6331450939178467,
	0.020471906289458275, -1.2553750276565552, 0.9996541142463684, 0.0024026324972510338, 1.5899839401245117,
	1.60658860206604, 1.8217518329620361, -0.7874345779418945, -0.07084434479475021, 0.7067334651947021,
	-2.123438835144043, -0.3052597641944885, 0.5153512358665466, 1.5694025754928589, -0.33213725686073303,
	-1.8485820293426514, -0.2362193465232849, -1.6905944347381592, -1.0976836681365967, 1.3280479907989502,
	-0.07856397330760956, 0.5700845718383789, 0.15610305964946747, 0.8572168350219727, -1.1694614887237549,
	-0.08709151297807693, 1.9143667221069336, 0.7401537895202637, -0.9972455501556396, 0.76584392786026,
	-0.44947677850723267, -1.209743857383728, 1.7371517419815063, 0.6478723883628845, -0.48229220509529114,
	-0.08975754678249359, 0.6241155862808228, -0.2628272771835327},
	{1.5344265699386597, -1.5059592723846436, -0.03482472524046898, -0.397544264793396, 0.05147520825266838,
		-0.11768506467342377, -1.0966991186141968, -0.03448713570833206, -0.5884000658988953, -1.1373169422149658,
		-0.41401344537734985, -0.4222969710826874, -1.015411138534546, 1.2785266637802124, -0.02308763563632965,
		-0.31842321157455444, 0.5709572434425354, 0.705312192440033, 1.0403963327407837, -0.43970227241516113,
		0.621886670589447, 0.9547477960586548, -0.44183585047721863, -0.243403822183609, 0.7107438445091248,
		-1.0343313217163086, -1.1119554042816162, 1.1092885732650757, 1.0524822473526, 0.23069989681243896,
		-1.6756833791732788, -0.2441711574792862, 1.204187273979187, -1.75810968875885, 0.29927751421928406,
		-0.6079540848731995, 0.6242823004722595, 0.3972391188144684, 0.09972359240055084, 0.16078096628189087,
		-0.3966154158115387, -1.1390502452850342, 0.45508745312690735, 1.0754809379577637, -0.4950591027736664,
		-0.7266273498535156, -0.11087492853403091, -0.4380734860897064, 0.7139984369277954, -0.036164671182632446,
		0.1281360238790512, 0.3793174624443054, 0.38083505630493164, -0.03857611492276192, -1.2247134447097778,
		1.7470005750656128, -0.20205137133598328, 0.5066145062446594, -0.8091312646865845, 0.16768895089626312,
		1.9536573886871338, 0.10736259073019028, -0.7141065001487732, 1.5194185972213745, 1.2772026062011719,
		-0.010804385878145695, -0.015912195667624474, -0.16136421263217926, 0.6759746670722961, -1.4418649673461914,
		1.8459872007369995, -0.9577665328979492, 2.186333179473877, 1.1586720943450928, 1.39888596534729,
		0.13190366327762604, 1.3206069469451904, -0.3420853018760681, 0.1851433664560318, 0.603830099105835,
		0.2172977328300476, 0.33369943499565125, -0.9704235792160034, 0.1660219132900238, 0.8332580924034119,
		1.5733720064163208, -0.2017258256673813, 3.4058470726013184, -0.1461540162563324, -1.812207579612732,
		0.4594288468360901, -1.4543660879135132, 0.9774110913276672, 0.459553986787796, 1.9761103391647339,
		1.578660249710083, 1.8603256940841675, -0.5349292159080505, -0.1384366750717163, 1.0958389043807983,
		-2.077817678451538, 0.28197237849235535, -0.2698410451412201, 1.60371994972229, -0.6998344659805298,
		-1.1823015213012695, 0.04686275124549866, -2.372795581817627, -1.3230491876602173, 0.9619216322898865,
		0.45569077134132385, 0.46340951323509216, -0.2531929612159729, 0.4843197166919708, -1.9646735191345215,
		0.1860291063785553, 2.1249642372131348, 0.7627654671669006, -0.8947176933288574, 1.160875916481018,
		-0.6929593682289124, -1.5806593894958496, 1.5965576171875, 0.5969161987304688, 0.19088374078273773,
		-0.09649708122015, 0.5446845889091492, -0.809962809085846},
	{1.2008469104766846, -1.8763127326965332, -0.29456275701522827, -0.9857990145683289, -0.07560359686613083,
		-0.23891237378120422, -1.2313926219940186, -0.340349942445755, -0.34816932678222656, -1.6574434041976929,
		-0.766367495059967, -0.7862783670425415, -1.337385654449463, 1.5871479511260986, -0.3126238286495209,
		-0.1214495375752449, -0.20206265151500702, 1.0176340341567993, 0.6533626914024353, -0.19308237731456757,
		0.47245585918426514, 0.4691859185695648, -0.47825074195861816, 0.23700140416622162, 0.9187780022621155,
		-1.7019109725952148, -1.124937653541565, 0.8931005597114563, 0.38308635354042053, 0.666231095790863,
		-1.592067837715149, -0.06449688971042633, 1.1249470710754395, -1.8699555397033691, 0.8410413265228271,
		-0.4881277084350586, 0.27616333961486816, 0.8086546659469604, 1.0807161331176758, 0.20770689845085144,
		-0.151548370718956, -2.1100683212280273, -0.15935930609703064, 0.45556458830833435, -0.5888150930404663,
		-0.8046041131019592, -0.03210659697651863, -0.01733376644551754, -0.19180069863796234, -0.029882311820983887,
		0.24997134506702423, 0.9556070566177368, 0.41394734382629395, 0.025481751188635826, -1.5481160879135132,
		1.4870902299880981, -0.8452946543693542, 0.9034210443496704, -0.678093433380127, -0.1751151829957962,
		1.947699785232544, 0.3173278272151947, -0.825377881526947, 0.9197444915771484, 1.00495445728302,
		0.0032295105047523975, 0.041005849838256836, -0.666059672832489, 0.5096132159233093, -1.0179458856582642,
		1.272803783416748, -0.8630032539367676, 1.7535771131515503, 1.016502857208252, 1.98042631149292,
		0.10114976763725281, 1.0677177906036377, -0.3694283962249756, 0.47342821955680847, 0.16197003424167633,
		0.20841209590435028, 0.5384462475776672, -0.8032312393188477, -0.005842246115207672, 0.5339689254760742,
		1.8951224088668823, -0.5318776965141296, 3.3259613513946533, -0.07695981860160828, -1.3698912858963013,
		0.01923072524368763, -1.779563546180725, 0.3080495297908783, 1.0275605916976929, 1.775273323059082,
		1.7479815483093262, 1.4954942464828491, -0.10831128060817719, -0.1968296766281128, 0.7672276496887207,
		-2.116488456726074, 0.7365643382072449, -0.37130412459373474, 1.2467275857925415, -1.0314985513687134,
		-0.5915593504905701, 0.0893854945898056, -2.356527805328369, -0.38958603143692017, 1.3606979846954346,
		0.9316962361335754, 0.23588478565216064, -0.1518973857164383, 0.8155868053436279, -1.9329192638397217,
		0.02154523693025112, 1.9294757843017578, 1.0230109691619873, -0.749573290348053, 1.2382584810256958,
		-0.6475497484207153, -1.7048879861831665, 1.543747901916504, 0.6199380159378052, 0.45487141609191895,
		-0.6824958920478821, 0.8552972078323364, -1.3067914247512817},
	{1.6131395101547241, -1.5326582193374634, 0.1573866903781891, -1.3724435567855835, 0.5490438342094421,
		-0.0385577417910099, -1.3438467979431152, -0.06597781181335449, -0.21840493381023407, -0.8786634206771851,
		-0.9622208476066589, -1.2308218479156494, -1.6571574211120605, 1.3739995956420898, 0.5466029047966003,
		-0.00288375117816031, -0.3963274359703064, 0.7634719610214233, 0.39351126551628113, -0.1343899816274643,
		0.6611441969871521, 0.13578560948371887, 0.18146073818206787, 0.08995742350816727, 1.2300163507461548,
		-1.762949824333191, -0.8669404983520508, 0.895955502986908, 0.17545731365680695, 0.47582393884658813,
		-1.5890259742736816, -0.02190747857093811, 0.5703259706497192, -1.4466267824172974, 0.769987940788269,
		-0.25639820098876953, 0.4294995963573456, 0.5146430134773254, 1.1325092315673828, -0.06876164674758911,
		-0.28198739886283875, -1.6832406520843506, 0.3580397963523865, 0.17980428040027618, -0.44365087151527405,
		-0.9133970141410828, 0.22809165716171265, 0.5772020220756531, 0.11489812284708023, 0.1384805291891098,
		-0.06628326326608658, 0.5035689473152161, 0.3721933960914612, 0.8075644373893738, -1.1368719339370728,
		0.7767468690872192, -1.7656679153442383, 1.2530783414840698, -0.9280828237533569, -0.12494274973869324,
		1.739819884300232, 0.3296206593513489, -1.0164324045181274, 0.8026871681213379, 1.3635504245758057,
		0.7870417237281799, 0.5036504864692688, -1.0561323165893555, 0.901376485824585, -1.2446783781051636,
		1.4273916482925415, -0.757037878036499, 1.124927043914795, 0.9448040127754211, 1.6653263568878174,
		-0.004164617508649826, 0.5840928554534912, -0.04426777362823486, -0.13312803208827972, 0.3262278735637665,
		-0.11489363014698029, 1.3475792407989502, -0.8498947024345398, 0.3556111752986908, 0.45352479815483093,
		1.4340077638626099, -0.5961325168609619, 2.910038471221924, -0.23821744322776794, -0.9579603672027588,
		0.4896678030490875, -1.896307349205017, 0.12907756865024567, 0.6003793478012085, 1.972274661064148,
		2.4102978706359863, 2.950840711593628, 0.2592496871948242, -0.11778047680854797, 0.0006757345981895924,
		-1.367422342300415, 0.8494439721107483, 0.10284243524074554, 0.932945728302002, -1.5894298553466797,
		-1.227874994277954, 0.01893680915236473, -2.2877509593963623, -0.8568443655967712, 1.3898489475250244,
		0.7481381893157959, 0.2566535174846649, 0.2283702939748764, 0.1724337637424469, -1.4840439558029175,
		0.31806665658950806, 1.8943960666656494, 0.9445827007293701, -1.186813235282898, 0.5690903067588806,
		-0.1637486219406128, -1.588051199913025, 1.233664870262146, 0.42023104429244995, 0.2926408648490906,
		-0.2916681170463562, 0.8149967789649963, -1.9058558940887451}}

var mat2 = [][]float64{{1.5925493240356445, -2.7539610862731934, 0.005682339426130056, -1.7967054843902588, -1.3501497507095337, 1.8092713356018066, -2.285400390625, 0.2517288327217102, 1.3584173917770386, 0.35642436146736145, -0.06124961003661156, 1.0916763544082642, -0.6677303910255432, 0.6601541042327881, 1.6705482006072998, 0.8602685928344727, -0.5414952635765076, -0.7386524677276611, 0.18170247972011566, 0.8358241319656372, 0.8738219738006592, -1.3539237976074219, -0.4389190375804901, 1.4155935049057007, -1.1314140558242798, -0.5180048942565918, -1.1386590003967285, 1.5713107585906982, -0.05997864902019501, 0.9286185503005981, -3.8505165576934814, -1.4187344312667847, -1.709458589553833, -1.161010980606079, -0.2697296142578125, -1.3158077001571655, 0.919552743434906, -0.4118742048740387, 0.49725621938705444, -1.1798197031021118, 0.2500663697719574, -0.23505161702632904, -0.4965664744377136, 0.3866608738899231, 0.6741625070571899, -0.2640506327152252, -1.6450172662734985, 1.1010870933532715, -0.33462661504745483, -0.16454893350601196, 0.47940224409103394, 2.1450908184051514, -0.36749905347824097, 0.3733028769493103, -0.6198704242706299, 0.2605808675289154, -0.28527843952178955, -1.491850733757019, -0.42564064264297485, 0.6441159844398499, -0.3226633369922638, -0.39277276396751404, -1.7239183187484741, 0.713027834892273, -0.21767769753932953, 0.32355552911758423, 0.3362867832183838, -0.6705808639526367, -1.4502997398376465, -2.055471420288086, 0.41507500410079956, -0.73788982629776, 0.9036096930503845, -0.41631945967674255, 2.2806477546691895, 0.6566720604896545, -0.09252367913722992, -1.9799635410308838, -1.1709039211273193, -0.38544151186943054, -0.5293723344802856, -0.28069159388542175, 0.22535942494869232, 1.403717041015625, -0.32367977499961853, 0.9249548316001892, -0.13886484503746033, 1.3451155424118042, 0.39945781230926514, -1.751666784286499, -0.1902424395084381, -1.4187103509902954, -0.9281856417655945, 0.4757061302661896, 1.493425726890564, 2.1821963787078857, 2.418764591217041, 2.02451753616333, 0.07140101492404938, 0.5700185894966125, -0.73780757188797, 0.20312263071537018, 0.8579114675521851, 0.24735702574253082, 0.6652504205703735, -3.4537556171417236, 0.07934147864580154, -0.6430742740631104, -0.1364441066980362, 1.0021097660064697, -1.159842848777771, 0.46801942586898804, -0.24968118965625763, 0.026135992258787155, 1.2387404441833496, -0.6968147158622742, -0.252570241689682, 1.260242223739624, -3.0303664207458496, 1.1609939336776733, 0.5338812470436096, 0.9661385416984558, 1.423253059387207, -0.5926752686500549, 0.4160882830619812, 0.09254031628370285, 0.3698345720767975, -0.5462259650230408}}
